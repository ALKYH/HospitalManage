<view class="container">
  <view class="header-bg"></view>

  <view class="header-card card shadow slide-in">
    <view class="header-top">
      <view class="title-area">
        <text class="title">{{department.name || 'ç§‘å®¤è¯¦æƒ…'}}</text>
        <text wx:if="{{department.parent}}" class="subtitle-tag">æ‰€å±ï¼š{{department.parent.name}}</text>
      </view>
      <button class="btn-share-mini" open-type="share">åˆ†äº«</button>
    </view>
    
    <view class="desc-box">
      <text class="desc-text {{isDescExpand ? '' : 'ellipsis'}}">{{department.description || 'æš‚æ— ç§‘å®¤ç®€ä»‹ã€‚'}}</text>
    </view>
    
    <view class="header-actions">
      <picker class="picker-wrapper" mode="selector" range="{{departmentNames}}" bindchange="onDeptPickerChange">
        <view class="picker-btn">åˆ‡æ¢ç§‘å®¤ <text class="arrow-down"></text></view>
      </picker>
    </view>
  </view>

  <view class="section-title-line">ä¸“å®¶å›¢é˜Ÿ</view>
  
  <view class="doctor-section">
    <scroll-view scroll-x class="doc-tab-scroll" wx:if="{{doctors.length}}">
      <view class="doc-tabs">
        <view 
          wx:for="{{doctors}}" 
          wx:key="id" 
          class="doc-tab-item {{selectedDoctor.id === item.id ? 'active' : ''}}"
          bindtap="onDocTap" 
          data-id="{{item.id}}"
        >
          <text class="tab-name">{{item.name}}</text>
          <text class="tab-title">{{item.title}}</text>
        </view>
      </view>
    </scroll-view>

    <view class="doctor-detail-card card shadow slide-in" wx:if="{{selectedDoctor}}">
      <view class="detail-main">
        <image wx:if="{{selectedDoctor.photo}}" src="{{selectedDoctor.photo}}" class="d-photo" mode="aspectFill" />
        <view class="d-info">
          <view class="d-header">
            <text class="d-name">{{selectedDoctor.name}}</text>
            <text class="d-tag" wx:if="{{selectedDoctor.title}}">{{selectedDoctor.title}}</text>
          </view>
          <view class="d-contact" wx:if="{{selectedDoctor.contact}}">
            <text class="icon-phone">ğŸ“</text> {{selectedDoctor.contact}}
          </view>
        </view>
      </view>
      
      <view class="divider"></view>

      <view class="d-bio-section">
        <view class="small-title">ä¸ªäººç®€ä»‹</view>
        <view class="d-bio">{{selectedDoctor.bio || 'æš‚æ— è¯¦ç»†ä»‹ç»'}}</view>
      </view>
      
      <button class="btn-appointment" bindtap="goToDoctor">é¢„çº¦æŒ‚å·</button>
    </view>

    <view wx:elif="{{!doctors.length}}" class="no-docs-empty">
      <text class="empty-text">è¯¥ç§‘å®¤æš‚æ— åŒ»ç”Ÿä¿¡æ¯</text>
    </view>
  </view>

  <view class="bottom-bar">
    <button class="btn-back" bindtap="onBack">è¿”å›ä¸Šä¸€é¡µ</button>
  </view>
</view>