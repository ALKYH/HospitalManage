<view class="container">
  <view class="header-bg"></view>

  <view class="card shadow slide-in">
    <view class="card-header">
      <view class="section-title-line">ç”µå­ç—…å†æ¡£æ¡ˆ</view>
      <view class="refresh-box" bindtap="loadRegistrations">
        <text class="refresh-icon">â†»</text>
        <text>åˆ·æ–°</text>
      </view>
    </view>
    <view class="message-tip" wx:if="{{message}}">{{message}}</view>
  </view>

  <view class="list-container" wx:if="{{registrations && registrations.length > 0}}">
    <block wx:for="{{registrations}}" wx:key="id">
      <view class="case-item card shadow slide-in" style="animation-delay: {{index * 0.1}}s">
        <view class="item-header">
          <view class="order-no">è®¢å• #{{item.id}}</view>
          <view class="visit-time">{{item.date}} {{item.slot}}</view>
        </view>

        <view class="divider"></view>

        <view class="item-body">
          <view class="doctor-info">
            <text class="doc-label">æ¥è¯ŠåŒ»ç”Ÿ</text>
            <text class="doc-name">{{item.doctor_name || ('#'+item.doctor_id)}}</text>
          </view>
          
          <view class="note-section">
            <view class="note-header">
              <view class="note-tag"></view>
              <text class="label">è¯Šæ–­åŠå¤„ç†å»ºè®®</text>
            </view>
            <view class="note-content">{{item.note || 'åŒ»ç”Ÿæš‚æœªå¡«å†™ç—…å†å†…å®¹'}}</view>
          </view>
        </view>

        <view class="item-footer">
          <text class="create-at">æ¡£æ¡ˆç”Ÿæˆäº: {{item.created_at}}</text>
        </view>
      </view>
    </block>
  </view>

  <view wx:if="{{!registrations || registrations.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ“‚</view>
    <text>æš‚æ— æŒ‚å·è®°å½•æˆ–åŒ»ç”Ÿå°šæœªå¡«å†™ç—…ä¾‹</text>
  </view>
</view>